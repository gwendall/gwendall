@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

:root {
  --background: #fafafa; /* slightly off-white */
  --foreground: #171717;
  --foreground-muted: #404040; /* neutral-700 - Better contrast than zinc-600 */
  --foreground-faint: #737373; /* neutral-500 - Better contrast than zinc-400 */
  --link: rgb(0, 85, 212);
}

/* Use html.dark to ensure specificity and clarity */
html.dark {
  --background: #0a0a0a; /* neutral-950 (already slightly off-black) */
  --foreground: #ededed;
  --foreground-muted: #a3a3a3; /* neutral-400 */
  --foreground-faint: #737373; /* neutral-500 */
  --link: #60a5fa; /* blue-400 */
}

html {
  /* Improves native UI rendering (forms, scrollbars) to match the current theme. */
  color-scheme: light;
  /* Prevent iOS Safari from auto-scaling text sizes. */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

  /* Responsive typography tuning (unitless so it scales with font-size). */
  --body-leading: 1.55;
  --content-leading: 1.65; /* slightly more breathing room on mobile */
}

html.dark {
  color-scheme: dark;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-foreground-muted: var(--foreground-muted);
  --color-foreground-faint: var(--foreground-faint);
  --color-link: var(--link);
  --font-mono: var(--font-geist-mono), "SF Mono", Menlo, Monaco, "Courier New", monospace;
}


body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-mono);
  /* Font rendering / legibility */
  font-kerning: normal;
  font-optical-sizing: auto;
  font-synthesis: none;
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: var(--body-leading);
  transition: background-color 0.2s ease, color 0.2s ease;
}

main {
  line-height: var(--content-leading);
}

/* Base font-size for mobile (and anything < lg). */
html { font-size: 15px; }

/* Desktop: slightly larger than before */
@media (min-width: 1024px) {
  html {
    font-size: 14px;
    --body-leading: 1.5;
    --content-leading: 1.55; /* tighter on desktop */
  }
}

/* Disable transitions on load to prevent flash */
.preload-transitions,
.preload-transitions * {
  transition: none !important;
}

/* Minimal prose styling for markdown notes */
.prose-minimal p {
  margin-bottom: 1em;
}

.prose-minimal p:last-child {
  margin-bottom: 0;
}

.prose-minimal strong {
  font-weight: 700;
  color: var(--foreground);
}

.prose-minimal em {
  font-style: italic;
}

.prose-minimal a {
  color: var(--link);
  text-decoration: underline;
}

.prose-minimal a:hover {
  text-decoration: none;
}

.prose-minimal code {
  background: color-mix(in srgb, var(--foreground) 8%, transparent);
  padding: 0.15em 0.35em;
  border-radius: 3px;
  font-size: 0.9em;
}

.prose-minimal blockquote {
  border-left: 2px solid var(--foreground-faint);
  padding-left: 1em;
  margin: 1em 0;
  color: var(--foreground-muted);
}

.prose-minimal ul,
.prose-minimal ol {
  margin: 1em 0;
  padding-left: 1.5em;
}

.prose-minimal li {
  margin-bottom: 0.25em;
}

/* Line clamp utility for note previews */
.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
